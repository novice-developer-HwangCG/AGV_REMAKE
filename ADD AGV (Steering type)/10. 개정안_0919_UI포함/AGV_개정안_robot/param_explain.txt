1) BWD_EDGE_TARGET (예: 0.60)

의미: push 단계에서 “라인을 화면 가장자리 쪽으로 얼마나 밀어둘지” 목표 오프셋(절대값).

작동: 현재 라인 위치 오차 e의 부호로 좌/우를 정하고, 목표를 target = sign(e) * BWD_EDGE_TARGET로 잡아 그 지점까지 일부러 보냄.

값 크면: 더 바깥(가장자리)까지 밀어둠 → 초기 정렬이 크게 걸려 부드럽게 들어오지만, 너무 크면 라인 놓칠 위험↑

값 작으면: 덜 바깥으로 보냄 → 급히 중앙으로 들어오나, 곡선/오차 큰 구간에서 안정감↓

권장 범위: 0.55 ~ 0.70

픽셀 감 잡기(너비 640): 0.60 × (640/2) = 192 px만큼 중앙에서 떨어진 위치가 목표.

2) BWD_SWITCH_TOL_IN (예: 0.15)

의미: push→pull 전환 임계치. 라인이 목표(edge target) 근처에 충분히 왔다고 판단하는 오차 범위.

작동: push 중에 |e - target| ≤ BWD_SWITCH_TOL_IN이면 pull로 전환(중앙 복귀 단계 시작).

값 크면: 목표 근처만 가도 빨리 pull로 넘어감 → 전환이 빠르고 진동 적지만, 목표에 덜 붙은 상태에서 꺾어 들어오므로 궤적이 짧음.

값 작으면: 목표에 더 바짝 붙을 때까지 push 유지 → 정렬은 더 정확하지만 전환이 늦고 왕복이 커질 수 있음.

권장 범위: 0.10 ~ 0.18

3) BWD_SWITCH_TOL_OUT (예: 0.25)

의미: pull→push 복귀 임계치(히스테리시스). 중앙을 향해 끌어오다 다시 많이 벗어나면 push로 돌아갈 기준.

작동: pull 중에 |e - 0| ≥ BWD_SWITCH_TOL_OUT(= |e|이 커지면) 다시 push로 전환.

값 크면: 히스테리시스 폭이 커져서 왔다갔다 전환이 덜 일어나 안정적이나, 한 번 벗어나면 push로 늦게 복귀.

값 작으면: 민감하게 push로 복귀 → 반응 빠르지만 전환이 잦아질 수 있음.

권장 범위: 0.20 ~ 0.30

팁: 보통 BWD_SWITCH_TOL_OUT은 BWD_SWITCH_TOL_IN보다 크게(≈1.5~2배) 잡아 플립플롭 방지(히스테리시스)


<--- 정리 --->

직선에서 라인을 자주 잃으면 → BWD_EDGE_TARGET ↓, BWD_SWITCH_TOL_IN ↑.

곡선/오차 큰 바닥에서 출렁이면 → BWD_SWITCH_TOL_OUT ↑ (전환 빈도 줄이기), BWD_EDGE_TARGET ↑(조금 더 밀어두기).

속도 높일수록(스피드 인덱스↑) → 세 톨러런스 모두 약간↑ 해서 안정성 확보하는 게 보통 유리.